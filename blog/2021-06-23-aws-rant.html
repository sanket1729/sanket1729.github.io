<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>How to reduce space on AWS virtual machines</title>
<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">
<link rel="stylesheet" href="//writ.cmcenroe.me/1.0.2/writ.min.css">
<link rel="stylesheet" href="/style.css" type="text/css" media="all" />
<link rel="alternate" href="/rss.xml" type="application/rss+xml" title="RSS" />
<meta name="author" content="Sanket Kanjalkar">
<meta name="description" content="Personal website of Sanket Kanjalkar."/>
<meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" /> 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101141559-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>
<body data-route=blog>
  <nav class="menu">
  <a class="menu-item " href="/about/">About Me</a>
  <a class="menu-item current" href="/">Blog</a>
  <a class="menu-item" href="/cv.pdf">CV</a>
  <a class="menu-item" href="/bitcoin.pdf">bitcoin whitepaper</a>
  
  <a class="menu-item" href="/search/">Search this page</a>
  <a class="menu-item" href="/archive/">Old archive</a>
  <a class="menu-item icon" href="http://github.com/sanket1729"><i class="fa fa-github"></i></a>
  <a class="menu-item icon" href="http://twitter.com/sanket1729"><i class="fa fa-twitter"></i></a>
  <a class="menu-item icon" href="/rss.xml"><i class="fa fa-rss"></i></a>
  <hr>
</nav>

  <main>
    <h2>Common tricks to reduce Space on AWS nano:</h2>
<p>My goal is to improve my writing skill and also to try to stay a bit organized
in the process. So, I will start off with a rant about aws troubles I faced today.</p>
<p>Welp, I have been running IRC bouncers on AWS servers for the past 2 years now.
Given my current lifestyle I cannot really afford to own a dedicated machine at
a dedicated place for a long period. The constant maintainance of a machine is
something that is impossible for a nomadic like lifestyle of mine.</p>
<p>Something like a bitcoin node is easily possible to run on a laptop without having
the need to be constantly online, but IRC bouncers require me to always stay online.
So, I got a AWS nano machine to run a IRC bouncer for me. The nano is machine is
minimal with 8Gb of space. So, I started on the quest to hunt for things that could
save me space. At start of this process, I was using about 6.9 Gb of 8 Gb in my system.</p>
<h1>Culprit 1: Unused kernel images</h1>
<p>Seems like AWS sneekily was updating the machine images
<code>/usr/src/linux-aws-headers-*</code>. These could be removed with
<a href="https://askubuntu.com/questions/1141630/why-is-usr-src-linux-aws-headers-growing">Stack overflow answer</a>.</p>
<h1>Culprit 2: Log files</h1>
<p>I also found it useful to contain the log file sizes used by systemd. This <a href="https://unix.stackexchange.com/questions/130786/can-i-remove-files-in-var-log-journal-and-var-cache-abrt-di-usr">answer</a> deals with
rotating log files for system with journalctl.</p>
<p>Someday, I will settle down at a somewhat permanent location and will finally try out
the bitcoin on lightning.</p>
<h1>Culprit 3: Snap files</h1>
<p>Snap files are used as a way to distribute linux applications. Snap maintains 3
versions of old applications incase things go wrong. This <a href="https://unix.stackexchange.com/questions/590319/is-it-safe-to-delete-these-snaps-what-are-snaps">answer</a> shows how to reduce the revisions of the
same application that are saved.</p>
<h1>Conclusion</h1>
<p>Now, I am back to 3.19Gb of space on my nano :) ended up saving about ~3.8 Gb overall without
compramising at all.</p>

  </main>
  <footer>
  <hr>
  <p>
    <a href="/license/">CC BY-SA 4.0 / MIT</a>
    -
    <a href="https://github.com/cobalt-org/cobalt.rs">Built with Cobalt</a>
  </p>
  <br>
</footer>

</body>
</html>
